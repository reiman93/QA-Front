"use strict";(self.webpackChunkQASystem=self.webpackChunkQASystem||[]).push([[8248],{8248:(z,u,s)=>{s.r(u),s.d(u,{ListModule:()=>j});var f=s(9808),g=s(1083),t=s(5e3),b=s(7511),v=s(651),x=s(3851),A=s(3424),Z=s(3737),C=s(5801),y=s(4366),S=s(7115),T=s(4673),w=s(8966),d=s(9386),h=s(4999),O=s(7423),D=s(5245),L=s(7322),M=s(2368);const J=["tabla"];function N(o,r){if(1&o&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function U(o,r){if(1&o&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.description," ")}}function P(o,r){if(1&o&&(t.TgZ(0,"td",17),t.TgZ(1,"span",18),t._uU(2),t.qZA(),t.qZA()),2&o){const e=r.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngClass",i.stateClass[e.id]),t.xp6(1),t.Oqu(e.state)}}function B(o,r){if(1&o&&(t.TgZ(0,"td",17),t._UZ(1,"img",19),t._uU(2),t.qZA()),2&o){const e=r.$implicit,i=t.oxw();t.xp6(1),t.s9C("src",i.foto[e.id],t.LSH),t.xp6(1),t.hij(" ",e.users.name," ")}}function k(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",20),t.TgZ(1,"div",21),t.TgZ(2,"div",22),t.TgZ(3,"button",23),t.NdJ("click",function(a){const c=t.CHM(e).$implicit,l=t.oxw();return a.stopPropagation(),l.createPreOperation(c)}),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",24),t.TgZ(7,"mat-label",25),t._uU(8,"Yes"),t.qZA(),t.TgZ(9,"mat-slide-toggle",26),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const c=t.CHM(e).$implicit;return t.oxw().showModal(a,c)}),t._uU(10," No "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,i=t.oxw();t.xp6(3),t.Q6J("disabled",i.disabled[e.id]),t.xp6(6),t.Q6J("disabled",i.disabled[e.id])}}const Y=function(){return[5,10,25,100]},E=[{path:"",component:(()=>{class o{constructor(e,i,a,n,c,l,m,p,q,I){this.dataGridService=e,this.service=i,this.servicioArea=a,this.servicioJanitor=n,this.servicioAction=c,this.servicioDeficiency=l,this.servicioNotificacion=m,this.router=p,this.snakBarService=q,this.dialog=I,this.emitter=new t.vpe,this.hideOptions=!1,this.slectedRows=!0,this.disabled=[],this.fields=[{label:"Notas",model:"",ref:"notes",class:"col-12",type:"text"}],this.stateClass=[],this.foto=[]}emitSelectedValues(e){this.emitter.emit(e)}emitNotifUpdate(e){this.servicioNotificacion.updateNotif()}ngOnInit(){console.warn("ngOnInit",this.hideOptions,"este es el valoir del hide"),this.getAllJanitor(),this.getAllDeficiency(),this.getAllAction(),this.dataGridService.dataGrid.subscribe(e=>{e.forEach((i,a)=>{this.stateClass[i.id]="Pendiente"==i.state?"badge rounded-pill bg-warning text-dark":"Aprobado"==i.state?"badge rounded-pill bg-success text-dark":"badge rounded-pill bg-danger text-dark",this.foto[i.id]=i.users.foto?i.users.foto:"assets/img/logo-icon.png"})})}getAllJanitor(){this.servicioJanitor.getAll("janitor").subscribe({next:e=>{console.warn("aaaha",e),this.dataJanitor=e.data,console.warn("this.dataArea",this.dataJanitor),console.warn("this.dataArea",this.fields),this.fields.push({label:"Encargado de limpieza",model:"",ref:"janitor",type:"combobox",class:"col-12",data:this.dataJanitor})},error:e=>{console.log("error",e),this.snakBarService.openSnackBar("Error getting data.","cerrar",{},"error")},complete:()=>console.info("complete")})}getAllAction(){this.servicioAction.getAll("relapse_action").subscribe({next:e=>{console.warn("fields sactions",e),this.dataAction=e.data,console.warn("this.dataAction",this.dataAction),console.warn("this.fields",this.fields),this.fields.push({label:"Acci\xf3n correctiva",model:"",ref:"action",type:"combobox",class:"col-12",data:this.dataAction})},error:e=>{console.log("error",e),this.snakBarService.openSnackBar("Error getting data.","cerrar",{},"error")},complete:()=>console.info("complete")})}getAllDeficiency(){this.servicioDeficiency.getAll("deficiency_type").subscribe({next:e=>{console.warn("dataDeficiency asdasd",e),this.dataDeficiency=e.data,console.warn("this.dataDeficiency",this.dataDeficiency),console.warn("this.fields",this.fields),this.fields.push({label:"Tipo de deficiencia",model:"",ref:"deficiency",type:"combobox",class:"col-12",data:this.dataDeficiency})},error:e=>{console.log("error",e),this.snakBarService.openSnackBar("Error getting data.","cerrar",{},"error")},complete:()=>console.info("complete")})}ngAfterViewInit(){console.warn("  this.tabla",this.tabla),this.tabla.selection.changed.subscribe(e=>{console.warn("esto es lo que cambia",e),e.added.forEach(a=>{console.warn("value del addd",a),this.disabled[a]=!1}),e.removed.forEach(a=>{console.warn("value del remove",a),this.disabled[a]=!0}),this.slectedRows=0===e.source.selected.length;const i=new Array;this.result.forEach((a,n)=>{-1!=e.source.selected.indexOf(a.id)&&i.push(a)}),this.emitSelectedValues(i)})}createPreOperation(e){let i={id:e.id,aceptable:!0,state:"Aprobado",notes:"Area aporbada",user:JSON.parse(sessionStorage.getItem("currentUser")).username};this.service.addPreOperation(i,"pre_operational").subscribe({next:a=>{this.snakBarService.openSnackBar("Successfully created","Close"),this.servicioArea.updateState(i,"updateState").subscribe({next:n=>{this.tabla.reloadData(),this.emitNotifUpdate(!0)},error:n=>{},complete:()=>{}})},error:a=>{this.snakBarService.openSnackBar("Error creating data.","cerrar",{},"error")},complete:()=>console.info("complete")})}showModal(e,i){console.warn("this.fields campos a mostrar en el select del modal",this.fields),e.checked&&this.dialog.open(b.L,{data:{title:"Datos del \xe1rea:"+i.name,fields:this.fields}}).afterClosed().subscribe(n=>{if(console.warn("result",n),n){console.warn("result and id to send services",n,i.id);var c={aceptable:!1,id:i.id,user:JSON.parse(sessionStorage.getItem("currentUser")).username};n.forEach((l,m)=>{Object.assign(c,{[l.ref]:l.model})}),console.warn("result and id to send data ",c),this.service.addPreOperation(c,"pre_operational").subscribe({next:l=>{this.snakBarService.openSnackBar("Successfully created","Close")},error:l=>{this.snakBarService.openSnackBar("Error creating data.","cerrar",{},"error")},complete:()=>{console.warn("sessionStorage.getItem('currentUser')",JSON.parse(sessionStorage.getItem("currentUser")));let l={name:"System Info",recived:!1,user:JSON.parse(sessionStorage.getItem("currentUser")).username,description:"El "+i.name+" se detecto en mal estado"};this.servicioNotificacion.create(l,"notification").subscribe({next:p=>{this.emitNotifUpdate(!0)},error:p=>{},complete:()=>{}}),this.servicioArea.updateState({id:i.id,state:"Desaprobado"},"updateState").subscribe({next:p=>{this.tabla.reloadData(),this.emitNotifUpdate(!0)},error:p=>{},complete:()=>{}})}})}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.A),t.Y36(x.e),t.Y36(A.T),t.Y36(Z.u),t.Y36(C.b),t.Y36(y.S),t.Y36(S.T),t.Y36(g.F0),t.Y36(T.A),t.Y36(w.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-equipment"]],viewQuery:function(e,i){if(1&e&&t.Gf(J,5),2&e){let a;t.iGM(a=t.CRH())&&(i.tabla=a.first)}},inputs:{hideOptions:"hideOptions"},outputs:{emitter:"emitter",emitSelectedValues:"emitSelectedValues"},decls:26,vars:9,consts:[[1,"row"],[1,"col-xl-10","mx-auto"],[1,"mb-0","text-uppercase"],[1,"card","border-top","border-0","border-4","border-white"],[1,"card-body","p-5"],[3,"selectAvailable","serviceData","verticalLine"],["tabla",""],["title","Name","matColumnDef","name","type","string",3,"sort"],["mat-cell","","style","text-align: right",4,"matCellDef"],["title","Description","matColumnDef","description","type","string",1,"warning",3,"sort"],["title","State","matColumnDef","state","type","string",3,"sort"],["title","QA last reviewer","matColumnDef","qa","type","string",3,"sort"],[2,"display","none"],["title","Options","matColumnDef","unknow"],["mat-cell","","style","padding-right: 0",4,"matCellDef"],[3,"pageSizeOptions"],["mat-raised-button","","color","warn",3,"click"],["mat-cell","",2,"text-align","right"],[3,"ngClass"],["width","40","height","40","alt","user avatar",1,"rounded-circle","mySpacer",3,"src"],["mat-cell","",2,"padding-right","0"],[1,"col-12",2,"text-align","center"],[1,"col-6",2,"display","inline-flex"],["mat-icon-button","","mat-button","",3,"disabled","click"],[1,"col-12",2,"display","inline-flex"],[1,"label-toogle"],["color","primary",3,"disabled","click","change"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h6",2),t._uU(3,"Pre Operational Sanitation"),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"app-mat-data-table",5,6),t.TgZ(9,"app-mat-column-table",7),t.YNc(10,N,2,1,"td",8),t.qZA(),t.TgZ(11,"app-mat-column-table",9),t.YNc(12,U,2,1,"td",8),t.qZA(),t.TgZ(13,"app-mat-column-table",10),t.YNc(14,P,3,2,"td",8),t.qZA(),t.TgZ(15,"app-mat-column-table",11),t.YNc(16,B,3,2,"td",8),t.qZA(),t._UZ(17,"div",12),t.TgZ(18,"app-mat-option-table",13),t.YNc(19,k,11,2,"td",14),t.qZA(),t._UZ(20,"app-mat-paginator-data-table",15),t.TgZ(21,"app-mat-error-data-table"),t._uU(22," There are problems to load data. "),t._UZ(23,"br"),t.TgZ(24,"button",16),t.NdJ("click",function(){return t.CHM(a),t.MAs(8).reloadData()}),t._uU(25," Reload "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.xp6(7),t.Q6J("selectAvailable",!0)("serviceData",i.servicioArea)("verticalLine",!0),t.xp6(2),t.Q6J("sort",!0),t.xp6(2),t.Q6J("sort",!0),t.xp6(2),t.Q6J("sort",!0),t.xp6(2),t.Q6J("sort",!0),t.xp6(5),t.Q6J("pageSizeOptions",t.DdM(8,Y)))},directives:[d.Zc,d.PT,h.w1,h.Dz,d.TD,d.y0,d.DV,O.lW,h.ev,f.mk,D.Hw,L.hX,M.Rr],styles:["table[_ngcontent-%COMP%]{margin:1rem auto;width:100%;overflow-x:auto;overflow-y:hidden;min-width:500px;box-shadow:-1px 3px 66px #000000bf}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;margin:1rem auto;max-width:100%;padding:1rem}.header-text[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#000000de;font-family:Roboto,Helvetica Neue,sans-serif}th.mat-header-cell[_ngcontent-%COMP%], td.mat-cell[_ngcontent-%COMP%]{text-align:center;max-width:300px}.mySpacer[_ngcontent-%COMP%]{margin:.5rem!important}.left-space[_ngcontent-%COMP%]{margin-left:10px}  mat-dialog-container{background:#222b45!important}mat-card-title[_ngcontent-%COMP%]{border-bottom:1px solid black;line-height:36px}.margin-toogle[_ngcontent-%COMP%]{margin-left:2.5px;margin-right:5px}.label-toogle[_ngcontent-%COMP%]{vertical-align:top}.containerToggle[_ngcontent-%COMP%]{display:inline-block;width:130px;vertical-align:top}"]}),o})()}];let Q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.Bz.forChild(E)],g.Bz]}),o})();var R=s(6596),_=s(9151);let j=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.ez,Q,R.V,_.q]]}),o})()}}]);